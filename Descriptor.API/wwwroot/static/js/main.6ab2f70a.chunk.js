(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){},47:function(e,t,n){e.exports=n(76)},52:function(e,t,n){},72:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),c=n.n(l),o=(n(52),n(8)),s=n(9),i=n(11),u=n(10),m=n(12),d=n(13),E=n(14),p=n(16),h=n(20),f=n(21),b="descriptor/LOAD_ITEMS_START",j="descriptor/LOAD_ITEMS_SUCCESS",g="descriptor/LOAD_ITEMS_FAILURE",O=function(e){return function(t){return t({type:b}),function(e){return fetch("/api/items/".concat(e),{method:"put",headers:{Authorization:"Bearer ".concat(N.getState().oidc.user.access_token)}}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,error:e.json()})},function(e){return console.log("An error occurred.",e)})}(e).then(function(e){return t({type:j,payload:e})}).catch(function(e){t({type:g}),e.error.then(function(e){return f.b.error(e.message)})})}},v={list:[],loadedSeller:null};var w={reviewsResult:{},itemsLoading:!1};var S=Object(h.c)({oidc:E.reducer,sellers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.SESSION_TERMINATED:case E.USER_EXPIRED:return Object.assign({},e,v);case T:return Object.assign({},e,{list:t.payload});case U:case x:return Object.assign({},e,{loadedSeller:t.payload});case j:return Object.assign({},e,{loadedSeller:Object.assign({},e.loadedSeller,{total:t.payload.total})});case D:return Object.assign({},e,{loadedSeller:null});default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.SESSION_TERMINATED:case E.USER_EXPIRED:return Object.assign({},e,w);case b:return Object.assign({},e,{itemsLoading:!0,reviewsResult:[]});case j:return Object.assign({},e,{itemsLoading:!1,reviewsResult:t.payload});case g:return Object.assign({},e,{itemsLoading:!1});default:return e}}}),y={client_id:"js",redirect_uri:"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(window.location.port?":".concat(window.location.port):"","/callback"),response_type:"token id_token",scope:"openid profile descriptor",authority:"http://10.0.75.1:8181",silent_redirect_uri:"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(window.location.port?":".concat(window.location.port):"","/silent-renew"),automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0,post_logout_redirect_uri:"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(window.location.port?":".concat(window.location.port):"","/")},L=Object(E.createUserManager)(y),_=n(41),R=Object(h.d)(Object(h.a)(_.a,function(e){return function(t){return function(n){console.log("Action type:",n.type),console.log("Action payload:",n.payload),console.log("State before:",e.getState()),t(n),console.log("State after:",e.getState())}}}))(h.e)(S,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Object(E.loadUser)(R,L);var N=R,k=n(42),A=n(15),C=Object(A.createBrowserHistory)({}),T="descriptor/LOAD_ALL_SELLERS_SUCCESS",U="descriptor/LOAD_SELLER_SUCCESS",x="descriptor/ADD_SELLER_SUCCESS",D="descriptor/CLEAR_SELLER",I=function(){return function(e){return e({type:"descriptor/LOAD_ALL_SELLERS_START"}),fetch("/api/sellers",{method:"get",headers:{Authorization:"Bearer ".concat(N.getState().oidc.user.access_token)}}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,error:e.json()})},function(e){return console.log("An error occurred.",e)}).then(function(t){return e({type:T,payload:t})}).catch(function(e){return e.error.then(function(e){return f.b.error(e.message)})})}},M=function(e){return function(t){return t({type:"descriptor/LOAD_SELLER_START"}),function(e){return fetch("/api/sellers/".concat(e),{method:"get",headers:{Authorization:"Bearer ".concat(N.getState().oidc.user.access_token)}}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,error:e.json()})},function(e){return console.log("An error occurred.",e)})}(e).then(function(e){return t({type:U,payload:e})}).catch(function(n){if(404===n.status)return Object(k.confirmAlert)({message:"New Seller. Load Items?",buttons:[{label:"Yes",onClick:function(){return t(B(e))}},{label:"No"}]});n.error.then(function(e){return f.b.error(e.message)})})}},B=function(e){return function(t){return t({type:"descriptor/ADD_SELLER_START"}),function(e){return fetch("/api/sellers/".concat(e),{method:"post",headers:{Accept:"application/json",Authorization:"Bearer ".concat(N.getState().oidc.user.access_token)}}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,error:e.json()})},function(e){return console.log("An error occurred.",e)})}(e).then(function(n){C.push("/load-items/new-seller"),t({type:x,payload:n}),t(O(e))}).catch(function(e){return e.error.then(function(e){return f.b.error(e.message)})})}},P=n(78),z=n(79),X=n(80),H=n(81),F=n(19),J=function(){var e=window.google.search.cse.element.getElement("e");return!!e&&(e.execute("market news"),!0)};window.__gcse={parsetags:"onload",callback:function(){J()||window.google.setOnLoadCallback(J)}};var V=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAllSellers(),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=004358329873995088609:hd3fadxvfdc";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}},{key:"render",value:function(){var e=this.props,t=e.sellers,n=e.reviewerName;return r.a.createElement(P.a,null,r.a.createElement(z.a,null,r.a.createElement(X.a,null,r.a.createElement("span",null,"Hello ",n,"!"))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:5},r.a.createElement(H.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Seller"),r.a.createElement("th",null,"Escalated"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.ebaySellerUserName},r.a.createElement("td",null,e.ebaySellerUserName),r.a.createElement("td",null,e.escalated))})))),r.a.createElement(X.a,{sm:2},r.a.createElement(F.a,{to:"load-items"},"Load Items")),r.a.createElement(X.a,{sm:5},r.a.createElement("div",{style:{maxHeight:"90vh",overflow:"auto"},dangerouslySetInnerHTML:{__html:'<gcse:searchresults-only noResultsString="No Results" gname="e"></gcse:searchresults-only>'}}))))}}]),t}(a.Component),W=Object(d.b)(function(e){return{sellers:e.sellers.list,reviewerName:e.oidc.user.profile.given_name}},function(e){return{loadAllSellers:function(){return e(I())}}})(V),Y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){L.signoutRedirect()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:this.logout},"Logout"))}}]),t}(a.Component),$=n(30),q=n(85),G=n(84),K=(n(27),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.seller;return e?r.a.createElement(P.a,{className:"seller-info"},r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"First Name:")),r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"textbox"},e.firstName||"-")),r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"Last Name:")),r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"textbox"},e.lastName||"-"))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"eMail:")),r.a.createElement(X.a,null,r.a.createElement("div",{className:"textbox"},e.emailAddress||"-"))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"Address:")),r.a.createElement(X.a,null,r.a.createElement("div",{className:"textbox address"},e.address||"-")))):null}}]),t}(a.Component)),Q=Object(d.b)(function(e){return{seller:e.sellers.loadedSeller}},function(e){return{dispatch:e}})(K),Z=n(86),ee=n(82),te=n(83),ne=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.reviewsResult,n=e.itemsLoading,a=t.accepted+t.rejected+t.escalated;return r.a.createElement("div",null,r.a.createElement(H.a,{className:"reviews-result"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Accepted"),r.a.createElement("th",null,"Rejected"),r.a.createElement("th",null,"Escalated"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t&&t.accepted>=0?t.accepted:"-"),r.a.createElement("td",null,t&&t.rejected>=0?t.rejected:"-"),r.a.createElement("td",null,t&&t.escalated>=0?t.escalated:"-"),r.a.createElement("td",null,t&&a>=0?a:"-")),r.a.createElement("tr",null,r.a.createElement("td",null,t&&a?"".concat(100*t.accepted/a,"%"):"-"),r.a.createElement("td",null,t&&a?"".concat(100*t.rejected/a,"%"):"-"),r.a.createElement("td",null,t&&a?"".concat(100*t.escalated/a,"%"):"-"),r.a.createElement("td",null)))),n?r.a.createElement("span",null,"Loading..."):null)}}]),t}(a.Component),ae=Object(d.b)(function(e){return{reviewsResult:e.items.reviewsResult,itemsLoading:e.items.itemsLoading}},function(e){return{dispatch:e}})(ne),re=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.seller;return r.a.createElement(Z.a,{isOpen:!0,className:"reviews-result-dialog"},r.a.createElement(ee.a,null,r.a.createElement("div",{className:"infobox"},r.a.createElement(P.a,null,r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"Seller:")),r.a.createElement(X.a,{sm:9},r.a.createElement("strong",null,e&&e.ebaySellerUserName||"-"))),r.a.createElement(z.a,null,r.a.createElement(X.a,null,r.a.createElement(Q,{className:"seller-info"}))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"Reviews history:")),r.a.createElement(X.a,null,r.a.createElement(ae,null)))))),r.a.createElement(te.a,null,r.a.createElement(G.a,{tag:F.a,to:"/"},"Close")))}}]),t}(a.Component),le=Object(d.b)(function(e){return{seller:e.sellers.loadedSeller}},function(e){return{dispatch:e}})(re),ce=n(46),oe=n.n(ce),se=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},n.onChange=function(e){n.setState(Object($.a)({},e.target.name,e.target.value))},n.loadSeller=function(){n.state.userName&&n.props.loadSeller(n.state.userName)},n.loadItems=function(){n.props.seller&&n.props.seller.ebaySellerUserName&&n.props.loadItems(n.props.seller.ebaySellerUserName)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.clearSeller()}},{key:"render",value:function(){var e=this,t=this.props,n=t.seller,a=(t.loadItems,t.itemsLoading);return r.a.createElement("div",{className:"infobox load-items"},r.a.createElement(P.a,null,r.a.createElement(z.a,null,r.a.createElement("h2",null,"Load Items")),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"Seller:")),r.a.createElement(X.a,{sm:3},r.a.createElement(q.a,{onChange:this.onChange,bsSize:"sm",name:"userName"})),r.a.createElement(X.a,null,r.a.createElement(G.a,{onClick:this.loadSeller,size:"sm"},"Load")))),r.a.createElement(oe.a,null,r.a.createElement(p.Route,{exact:!0,path:"/load-items/new-seller",component:le}),r.a.createElement(p.Route,{exact:!0,path:"/load-items",component:function(t){return r.a.createElement("div",null,r.a.createElement(Q,null),n?r.a.createElement("div",null,r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:2}),r.a.createElement(X.a,{sm:3},r.a.createElement("div",{className:"label"},"# loaded items:")),r.a.createElement(X.a,{sm:1},r.a.createElement("div",{className:"textbox"},n.total||0))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3}),r.a.createElement(X.a,{sm:2},r.a.createElement(G.a,{size:"sm",onClick:e.loadItems},"Load new items")),r.a.createElement(X.a,null,r.a.createElement(G.a,{size:"sm"},"Review existing items"))),r.a.createElement(z.a,null,r.a.createElement(X.a,{sm:3}),r.a.createElement(X.a,null,a?r.a.createElement("span",null,"Loading..."):null))):null)}})))}}]),t}(a.Component),ie=Object(p.withRouter)(Object(d.b)(function(e){return{seller:e.sellers.loadedSeller,itemsLoading:e.items.itemsLoading}},function(e){return{loadSeller:function(t){return e(M(t))},loadItems:function(t){return e(O(t))},clearSeller:function(){return e({type:D})}}})(se)),ue=function(){return r.a.createElement("main",null,r.a.createElement(Y,null),r.a.createElement(p.Switch,null,r.a.createElement(p.Route,{path:"/load-items",component:ie}),r.a.createElement(p.Route,{path:"/",component:W})))},me=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).redirect=function(){L.signinRedirect().catch(function(e){console.error(e),setTimeout(function(){n.redirect()},1e3)})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;new Promise(function(e){return setTimeout(e,5e3)}).then(function(){e.props.isLoadingUser||e.redirect()})}},{key:"componentDidUpdate",value:function(e){this.props.isLoadingUser||e.isLoadingUser===this.props.isLoadingUser||this.redirect()}},{key:"render",value:function(){return r.a.createElement("div",null,"Redirecting...")}}]),t}(r.a.Component);var de=Object(d.b)(function(e){return{isLoadingUser:e.oidc.isLoadingUser}},function(e){return{dispatch:e}})(me),Ee=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.user;return!e||e.expired?r.a.createElement(de,null):r.a.createElement("div",null,r.a.createElement(ue,null))}}]),t}(a.Component);var pe=Object(p.withRouter)(Object(d.b)(function(e){return{user:e.oidc.user}},function(e){return{dispatch:e}})(Ee)),he=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(E.CallbackComponent,{userManager:L,successCallback:function(){console.log("success"),e.props.history.push("/")},errorCallback:function(t){console.error(t),e.props.history.push("/")}},r.a.createElement("div",null,"Redirecting..."))}}]),t}(r.a.Component),fe=Object(d.b)()(he),be=(n(72),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:N},r.a.createElement(E.OidcProvider,{store:N,userManager:L},r.a.createElement("div",null,r.a.createElement(p.Switch,null,r.a.createElement(p.Route,{exact:!0,path:"/callback",component:fe}),r.a.createElement(p.Route,{path:"/",component:pe})),r.a.createElement(f.a,null))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(73),n(74),n(75);"/silent-renew"===window.location.pathname?Object(E.processSilentRenew)():c.a.render(r.a.createElement(p.Router,{history:C},r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.6ab2f70a.chunk.js.map